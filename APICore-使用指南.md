# APICore 平台集成使用指南

## 🎯 功能概述

现在 Sora Image Demo 已经完整集成了 APICore 平台，支持使用 `sora_image` 模型生成图片。APICore 作为备用平台，当云雾 API 不可用时会自动切换。

## 🔑 API Key 配置

### 1. 获取 APICore API Key
- 访问：https://doc.apicore.ai/api-301177867
- 注册账户并获取 API Key（格式：`sk-xxxx`）

### 2. 在页面中配置
1. 打开 `sora_image.html`
2. 在"图转提示词"页面找到"图片生成"区域
3. 输入你的 APICore API Key
4. 点击"测试连接"验证配置

## 🎨 使用方式

### 图转提示词页面
1. **配置 API**：输入云雾 API Key 和/或 APICore API Key
2. **上传图片**：选择参考图片
3. **生成提示词**：使用 AI 生成提示词
4. **生成图片**：点击"批量生成图片 (多平台)"

### 故事提示词页面
1. **使用相同配置**：故事页面使用图转提示词页面的 API 配置
2. **生成故事脚本**：通过 AI 或导入 CSV
3. **批量生成**：点击"一键生成整个故事 (多平台)"

## ⚙️ APICore 高级设置

点击"显示APICore高级设置"可以配置：

- **图片尺寸**：
  - 256x256
  - 512x512  
  - 1024x1024（默认）

- **图片质量**：
  - 标准（standard）
  - 高清（hd，默认）

## 🔄 多平台自动切换

系统按以下优先级尝试平台：
1. **云雾 API**（优先级 1）
2. **APICore**（优先级 2，备用）

如果云雾 API 失败，系统会自动切换到 APICore。

## 📋 API 规范对照

| 参数 | APICore 要求 | 当前实现 |
|------|-------------|----------|
| 端点 | `https://api.apicore.ai/v1/images/generations` | ✅ |
| 模型 | `sora_image` | ✅ |
| 认证 | `Bearer sk-xxxx` | ✅ |
| 尺寸 | `256x256`, `512x512`, `1024x1024` | ✅ |
| 质量 | `standard`, `hd` | ✅ |
| 格式 | `url`, `b64_json` | ✅ |
| 数量 | `1-8` | ✅ |

## 🔍 调试和日志

页面底部的"调试日志"区域会显示：
- API 调用详情
- 平台切换过程
- 错误信息和解决建议
- 成功生成的图片信息

## 💡 使用建议

1. **双平台配置**：建议同时配置云雾 API 和 APICore，提高成功率
2. **测试连接**：配置后先测试连接，确保 API Key 有效
3. **查看日志**：遇到问题时查看调试日志获取详细信息
4. **合理设置**：根据需求选择合适的图片尺寸和质量

## 🚨 常见问题

### Q: APICore 连接失败怎么办？
A: 检查以下几点：
- API Key 是否正确（格式：sk-xxxx）
- 账户余额是否充足
- 网络连接是否正常
- 提示词是否包含敏感内容

### Q: 为什么有时用云雾 API，有时用 APICore？
A: 系统会优先使用云雾 API，只有在云雾 API 失败时才会自动切换到 APICore。

### Q: 如何强制使用 APICore？
A: 可以暂时清空云雾 API Key，这样系统就会直接使用 APICore。

## 🎉 总结

现在你的 Sora Image Demo 已经完整支持 APICore 平台！无论是图转提示词还是故事提示词功能，都可以使用 APICore 的 `sora_image` 模型生成高质量图片。多平台支持确保了更高的可用性和成功率。